services:
  api:
    build: ./portal-api
    container_name: ek-portal-api
    environment:
      - DATABASE_URL=sqlite:///./data/portal.db
      - SECRET_KEY=dev-secret-key-change-in-production
      - ACCESS_TOKEN_EXPIRE_MINUTES=60
      - REFRESH_TOKEN_EXPIRE_DAYS=7
    volumes:
      - portal-data:/app/data
    restart: unless-stopped

  web:
    build:
      context: ..
      dockerfile: web/Dockerfile
    container_name: ek-portal-web
    ports:
      - "5173:80"
    depends_on:
      - api
    restart: unless-stopped

volumes:
  portal-data:
